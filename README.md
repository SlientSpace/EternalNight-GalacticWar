# 2D 宇宙舰队战争（Space War)

一款基于 HTML5 Canvas 的轻量级 2D 太空舰队对战游戏。你可以观察 AI 舰队的编队与交战，也可以随时接管一艘舰船，亲自参与战斗。游戏内包含多种舰船类型与武器体系，支持导弹战斗部、无人机、EMP 电磁脉冲等多样化战术元素。

---

## 玩法概述
- 海量舰船在超大地图上对战，AI 会进行寻敌、编队（分离/对齐/凝聚）与目标选择。
- 武器类型丰富：动能弹、能量弹、导弹（含多种战斗部）、激光/近防等，不同武器拥有各自射程、伤害、冷却与特殊效果。
- 爆炸与粒子效果强化战场表现，并对性能做了优化以确保流畅度。
- 支持缩放与平移的“相机”视角，以及舰船追踪与接管玩法。

---

## 舰船类型（示意）
游戏内包含多种舰船类型，属性各异，适合不同战术：
- 护卫舰 Frigate：轻型、速度快、机动性强，适合骚扰与快速迂回。
- 驱逐舰 Destroyer：中型火力与速度的平衡体，常作主力骨干。
- 巡洋舰 Cruiser：综合能力较强，输出与生存兼顾。
- 战列巡洋舰 Battlecruiser：重火力、良好速度，适合突破与压制。
- 战列舰 Battleship：最强火力与装甲，机动较弱，是阵线核心。

提示：不同类型的舰船会影响其武器槽数量、能量与热量容量、最高速度/加速度等，进而影响战斗风格。

---

## 武器与战术系统
- 动能弹（Kinetic）：高速实体弹丸，适合对付中近距离目标，部分变体可快速连发或充当近防火力。
- 能量弹（Energy）：光球类能量投射物，中距离持续压制与消耗。
- 导弹（Seeking Missile）：具备追踪能力，可配置不同战斗部：
  - 纯动能/穿甲：对装甲目标效果更佳。
  - 高爆：范围伤害，对密集编队有优势。
  - 核（Nuclear）：大范围爆炸与冲击波，造成立即与持续打击。
- 激光/近防：用于拦截或压制，冷却短、响应快。
- EMP 电磁脉冲（EMP）：在爆炸半径内产生能量抑制效果，对电子系统造成强烈干扰（如削弱或限制目标作战能力）。

此外，部分舰船可释放“无人机（Drone）”，用于骚扰、追击与近距离爆破，形成灵活战术组合。

---

## 粒子与爆炸表现
- 击中与爆炸会产生粒子特效（火花、碎片、冲击光圈等），随时间衰减。
- 爆炸规模与武器战斗部挂钩，核爆等会产生更显著的范围效果。

---

## 操作说明
- 鼠标拖拽：平移（拖动画布）。
- 鼠标滚轮：缩放（拉近/拉远）。
- 双击舰船：切换/追踪该舰船。
- 键盘 O：接管/放弃接管当前追踪舰船（手动控制）。
- 接管时：
  - W/A/S/D：推进与转向（前/左/后/右）。
  - 空格：开火（按已装备武器自动射击）。

提示：不同缩放级别下，HUD 与图标会根据倍率调整显示，以便在宏大地图或近距离都能清晰辨识目标。

---

## 界面与信息面板
- 左中区域为战斗画面（Canvas）。
- 右侧信息面板展示：
  - 舰队、舰船类型、当前状态
  - 生命值、速度
  - 武器列表与冷却条（实时反馈武器就绪状态）
- 选中舰船会出现短暂高亮环，便于快速定位。

---

## 图标与美术
- 舰船、导弹与无人机采用图标化美术（PNG 资产位于 `assets/objects_icon/`）。
- 根据不同阵营/武器自动着色显示，便于区分（颜色和缩放与相机倍率相关）。
- 首次进入将自动加载图标资源（已内置加载与缓存机制）。

---

## 性能与优化
为保证大场面下的流畅度，项目做了多项优化：
- 视口裁剪（Viewport Culling）：仅绘制屏幕可见范围内的对象。
- 图标着色缓存（Canvas Cache）：彩色图标按尺寸缓存，避免重复像素处理。
- 粒子系统优化：
  - 粒子对象池（Object Pooling），减少频繁创建与 GC 开销。
  - 限制粒子总量（默认上限），大爆炸也尽量保持帧率稳定。
- 弹丸/特效的绘制与更新都带有边界和可见性检查，减少无效开销。

建议：
- 使用最新版 Chrome/Edge/Firefox。
- 在低配设备上可减少同时参与战斗的舰船数量，以进一步提升帧率。

---

## 如何运行
1. 克隆或下载本项目到本地。
2. 使用任意静态服务器在项目根目录启动（需允许浏览器加载本地资源）：
   - Python（3.x）：在项目根目录执行：
     ```bash
     python -m http.server 8000
     ```
     然后在浏览器打开：http://localhost:8000/
   - 或使用 VS Code 的 Live Server、`npx serve` 等工具。
3. 打开页面后，等待图标资源加载完成，即可开始观看或参与战斗。

---

## 浏览器兼容性
- 需要支持 ES Modules 与 HTML5 Canvas 的现代浏览器。
- 建议使用桌面端浏览器以获得更佳的交互与性能表现。

---

## 常见问题（FAQ）
- 首次打开加载较慢？
  - 由于需要加载多张图标资源，首次进入会有短暂等待；后续有缓存机制，加载更快。
- 画面卡顿或掉帧？
  - 降低舰船数量或缩短交战时间；确保关闭后台占用高的程序；使用最新版浏览器。
- 无法看到某些弹丸/特效？
  - 可能处于屏幕外或缩放过大/过小，可调整缩放或拖动画面进行查看。

---

## 目录结构（简要）
```
assets/objects_icon/   # 舰船、导弹、无人机等图标素材
src/
  ├─ constants.js      # 常量与配置
  ├─ iconLoader.js     # 图标加载与着色缓存
  ├─ main.js           # 入口、循环、相机与交互
  ├─ projectiles.js    # 弹丸、粒子、无人机与 EMP 等
  ├─ ship.js           # 舰船、AI、武器与渲染
  ├─ utils.js          # 随机与辅助工具
  └─ vector.js         # 2D 向量工具
index.html             # 页面入口
styles.css             # 样式
```

---

## 许可与致谢
- 本项目仅用于学习与演示目的，素材版权归原作者所有。若需商用或再分发，请先确认相关授权。
- 特别感谢所有开源生态提供的灵感与参考。